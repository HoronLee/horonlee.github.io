import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CVz-OEk3.js";import"./chunks/@vueuse/motion.Bjv2JULu.js";import{e as g,u,a as y}from"./chunks/vue-router.CkK6wkE3.js";import{aa as b,al as a,ad as n,ae as i,ai as s,F as m,ab as E,Z as F}from"./framework.DiIp3j3P.js";import"./app.DYfWnlAw.js";import"./chunks/dayjs.Byk5cVHE.js";import"./chunks/vue-i18n.Cqw7qwJJ.js";import"./chunks/pinia.DAg2g0nX.js";import"./chunks/nprogress.QNtX8Req.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.YMmXRdII.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.NFwy7W3t.js";import"./post.DSQTc9o3.js";const C=g("/posts/KubernetesJenkinCICD",async e=>JSON.parse('{"title":"使用 Jenkins&GitLab 构建 CICD","description":"","frontmatter":{"layout":"post","title":"使用 Jenkins&GitLab 构建 CICD","date":"2024-05-20 17:24:26","tags":["Linux","Kubernetes","云计算","CICD","Jenkins"],"categories":["云计算","Devops","Jenkins"],"cover":"https://bu.dusays.com/2024/09/30/66fa0a7e96de2.png","password":null,"hide":null},"headers":[],"relativePath":"pages/posts/KubernetesJenkinCICD.md","lastUpdated":1758206429000}'),{lazy:(e,t)=>e.name===t.name}),R={__name:"KubernetesJenkinCICD",setup(e,{expose:t}){const{data:r}=C(),k=y(),p=u(),h=Object.assign(p.meta.frontmatter||{},r.value?.frontmatter||{});return k.currentRoute.value.data=r.value,F("valaxy:frontmatter",h),globalThis.$frontmatter=h,t({frontmatter:{layout:"post",title:"使用 Jenkins&GitLab 构建 CICD",date:"2024-05-20 17:24:26",tags:["Linux","Kubernetes","云计算","CICD","Jenkins"],categories:["云计算","Devops","Jenkins"],cover:"https://bu.dusays.com/2024/09/30/66fa0a7e96de2.png",password:null,hide:null}}),(l,o)=>{const d=c;return E(),b(d,{frontmatter:m(h)},{"main-content-md":a(()=>[...o[0]||(o[0]=[i("h1",{id:"kubernetes使用jenkins构建cicd",tabindex:"-1"},[s("Kubernetes使用Jenkins构建CICD "),i("a",{class:"header-anchor",href:"#kubernetes使用jenkins构建cicd","aria-label":'Permalink to "Kubernetes使用Jenkins构建CICD"'},"​")],-1),i("h2",{id:"引子",tabindex:"-1"},[s("引子 "),i("a",{class:"header-anchor",href:"#引子","aria-label":'Permalink to "引子"'},"​")],-1),i("p",null,[s("这篇文章是我在学校帮老师写的，旨在于帮助同学更好的学习 kubernetes、使用 Jenkins 软件和理解 CICD 流程，其中 jenkins 和 gitlab-ce 的镜像均可以从 "),i("a",{href:"https://hub.docker.com/",target:"_blank",rel:"noreferrer"},"Docker Hub"),s(" 拉取，项目文件就是我的个人文档"),i("a",{href:"https://github.com/HoronLee/HoronDoc.git",target:"_blank",rel:"noreferrer"},"HoronDoc"),s("，同志们可以自行下载构建（不包含 Dockerfile），或者在我的个人 NAS 上下载"),i("a",{href:"http://horon.ddns.net:5212/s/pbfw",target:"_blank",rel:"noreferrer"},"VitePressProject"),s("（包含 Dockerfile）。下面就是正文了，enjoy:D")],-1),i("h2",{id:"虚拟机信息",tabindex:"-1"},[s("虚拟机信息 "),i("a",{class:"header-anchor",href:"#虚拟机信息","aria-label":'Permalink to "虚拟机信息"'},"​")],-1),i("p",null,"本教程为 Kubernetes 双节点安装，IP 如下：",-1),i("p",null,"Master 节点：172.30.26.174",-1),i("p",null,"​ 4 个 vCPU",-1),i("p",null,"​ 4G 内存",-1),i("p",null,"Worker节点：172.30.26.175（标记为 worker tag，pod 主动在此节点运行）",-1),i("p",null,"​ 4 个 vCPU",-1),i("p",null,"​ 12G 内存",-1),i("h2",{id:"准备阶段",tabindex:"-1"},[s("准备阶段 "),i("a",{class:"header-anchor",href:"#准备阶段","aria-label":'Permalink to "准备阶段"'},"​")],-1),i("p",null,"在 root 目录新建文件夹 cicd，用于存放本次练习的所有资源文件",-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"mkdir jenkins")]),s(`
`),i("span",{class:"line"},[i("span",null,"cd jenkins")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"将Master节点root目录下的.kube目录scp到Worker节点",-1),i("p",null,[i("code",null,"scp -r .kube worker:/root")],-1),i("p",null,[s("编辑这个传到 worker 节点的.kube 文件中的 config 文件，将server: "),i("a",{href:"https://apiserver.cluster.local:6443",target:"_blank",rel:"noreferrer"},"https://apiserver.cluster.local:6443"),s(" 改为 "),i("a",{href:"https://172.30.26.174:6443",target:"_blank",rel:"noreferrer"},"https://172.30.26.174:6443")],-1),i("p",null,"也就是 master 节点的 ip，目的是为了 后续 jenkins容器中可以正常访问 k8s 的 apiserver",-1),i("h3",{id:"创建devops-命名空间",tabindex:"-1"},[s("创建DevOps 命名空间 "),i("a",{class:"header-anchor",href:"#创建devops-命名空间","aria-label":'Permalink to "创建DevOps 命名空间"'},"​")],-1),i("p",null,[i("code",null,"kubectl create ns devops")],-1),i("h3",{id:"安装-docker-双节点",tabindex:"-1"},[s("安装 Docker（双节点） "),i("a",{class:"header-anchor",href:"#安装-docker-双节点","aria-label":'Permalink to "安装 Docker（双节点）"'},"​")],-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"sudo yum install -y yum-utils")]),s(`
`),i("span",{class:"line"},[i("span",null,"sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo")]),s(`
`),i("span",{class:"line"},[i("span",null,"sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin")]),s(`
`),i("span",{class:"line"},[i("span",null,"sudo systemctl start docker")]),s(`
`),i("span",{class:"line"},[i("span",null,"sudo systemctl enable docker")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"修改containerd配置-双节点",tabindex:"-1"},[s("修改containerd配置（双节点） "),i("a",{class:"header-anchor",href:"#修改containerd配置-双节点","aria-label":'Permalink to "修改containerd配置（双节点）"'},"​")],-1),i("p",null,"Containerd从v1.5之后就不推荐了以config.toml作为镜像仓库的配置文件，但是目前还是可以这样做的",-1),i("p",null,[i("code",null,"vim /etc/containerd/config.toml")],-1),i("p",null,"找到此字段并且添加以下内容 (155 行左右，记得缩进)，请对应自己的harbor所在节点地址，也就是Master节点",-1),i("div",{class:"language-yaml"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"yaml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'plugins."io.containerd.grpc.v1.cri".registry.mirrors'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'          endpoint = ["https://hub-mirror.c.163.com"]')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'plugins."io.containerd.grpc.v1.cri".registry.mirrors."172.30.26.172"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'          endpoint = ["http://172.30.26.172"]')])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"然后重启：",-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"systemctl daemon-reload")]),s(`
`),i("span",{class:"line"},[i("span",null,"systemctl restart containerd")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"配置镜像仓库非https登录-双节点",tabindex:"-1"},[s("配置镜像仓库非HTTPS登录 (双节点） "),i("a",{class:"header-anchor",href:"#配置镜像仓库非https登录-双节点","aria-label":'Permalink to "配置镜像仓库非HTTPS登录 (双节点）"'},"​")],-1),i("p",null,[s("编辑新文件："),i("code",null,"vi /etc/docker/daemon.json")],-1),i("p",null,"写入以下内容，地址是Master节点IP（也就是接下来要安装Harbor的地址）",-1),i("div",{class:"language-json"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "insecure-registries"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"172.30.26.174"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"重启docker",-1),i("p",null,[i("code",null,"systemctl daemon-reload && systemctl restart docker")],-1),i("h2",{id:"安装-harbor-镜像仓库",tabindex:"-1"},[s("安装 Harbor 镜像仓库 "),i("a",{class:"header-anchor",href:"#安装-harbor-镜像仓库","aria-label":'Permalink to "安装 Harbor 镜像仓库"'},"​")],-1),i("p",null,"将harbor-offline-installer-v2.9.4.tgz下载到opt目录下",-1),i("p",null,[i("code",null,"curl -O http://172.30.27.143/CICD/harbor-offline-installer-v2.9.4.tgz")],-1),i("p",null,[s("解压文件"),i("code",null,"tar xvf harbor-offline-installer-v2.9.4.tgz")],-1),i("p",null,[s("进入harbor安装目录"),i("code",null,"cd harbor")],-1),i("p",null,[s("编写安装配"),i("code",null,"cp harbor.yml.tmpl harbor.yml")],-1),i("p",null,[i("code",null,"vim harbor.yml")],-1),i("p",null,"将第五行hostname:后面的IP改为Master节点IP",-1),i("p",null,[i("code",null,"hostname: 172.30.26.174")],-1),i("p",null,"删除里面13-18行以取消https配置",-1),i("p",null,[s("执行脚本来安装harbor"),i("code",null,"./install.sh")],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161913221.png",alt:"image-20240930095151300",loading:"lazy",decoding:"async"})],-1),i("p",null,"出现如图回显说明Harbor安装完成",-1),i("p",null,"访问Harbor",-1),i("p",null,[i("a",{href:"http://172.30.26.174/",target:"_blank",rel:"noreferrer"},"http://172.30.26.174/")],-1),i("p",null,"​ 账号：admin",-1),i("p",null,"​ 密码：Harbor12345",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161918034.png",alt:"image-20240930095225791",loading:"lazy",decoding:"async"})],-1),i("h3",{id:"新建项目",tabindex:"-1"},[s("新建项目 "),i("a",{class:"header-anchor",href:"#新建项目","aria-label":'Permalink to "新建项目"'},"​")],-1),i("p",null,"新建名为“vitepress“ 的项目，并且设定为公开",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161923506.png",alt:"image-20240930095241492",loading:"lazy",decoding:"async"})],-1),i("p",null,"登录Harbor",-1),i("p",null,[i("code",null,"docker login 172.30.26.174")],-1),i("p",null,"输入账号和密码，即可登录",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161931096.png",alt:"image-20240930095403692",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"安装jenkins",tabindex:"-1"},[s("安装Jenkins "),i("a",{class:"header-anchor",href:"#安装jenkins","aria-label":'Permalink to "安装Jenkins"'},"​")],-1),i("h3",{id:"上传镜像-worker-节点",tabindex:"-1"},[s("上传镜像(worker 节点) "),i("a",{class:"header-anchor",href:"#上传镜像-worker-节点","aria-label":'Permalink to "上传镜像(worker 节点)"'},"​")],-1),i("p",null,[i("code",null,"curl -O http://172.30.27.143/CICD/jenkins-Gitlab.tar")],-1),i("p",null,[i("code",null,"ctr -n k8s.io image import jenkins-Gitlab.tar")],-1),i("h3",{id:"生成-jenkins基础资源文件",tabindex:"-1"},[s("生成 jenkins基础资源文件 "),i("a",{class:"header-anchor",href:"#生成-jenkins基础资源文件","aria-label":'Permalink to "生成 jenkins基础资源文件"'},"​")],-1),i("p",null,[i("code",null,"kubectl create deployment jenkins --image=docker.io/jenkins/jenkins:latest --port=8080 --namespace=devops --dry-run=client -o yaml >> jenkins.yaml")],-1),i("p",null,"删除最后两行，这里不做资源限制",-1),i("div",{class:"language-yaml"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"yaml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"resources"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"status"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"添加或修改为以下部分：",-1),i("div",{class:"language-"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"}),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",null,"   serviceAccountName: jenkins")]),s(`
`),i("span",{class:"line"},[i("span",null,"….")]),s(`
`),i("span",{class:"line"},[i("span",null,"    imagePullPolicy: IfNotPresent")]),s(`
`),i("span",{class:"line"},[i("span",null,"    securityContext: ")]),s(`
`),i("span",{class:"line"},[i("span",null,"     runAsUser: 0")]),s(`
`),i("span",{class:"line"},[i("span",null,"     privileged: true")]),s(`
`),i("span",{class:"line"},[i("span",null,"…")]),s(`
`),i("span",{class:"line"},[i("span",null,"    volumeMounts:")]),s(`
`),i("span",{class:"line"},[i("span",null,"    - mountPath: /var/jenkins_home")]),s(`
`),i("span",{class:"line"},[i("span",null,"     name: jenkinshome")]),s(`
`),i("span",{class:"line"},[i("span",null,"    - mountPath: /usr/bin/docker")]),s(`
`),i("span",{class:"line"},[i("span",null,"     name: docker")]),s(`
`),i("span",{class:"line"},[i("span",null,"    - mountPath: /var/run/docker.sock")]),s(`
`),i("span",{class:"line"},[i("span",null,"     name: dockersock")]),s(`
`),i("span",{class:"line"},[i("span",null,"    - mountPath: /usr/bin/kubectl")]),s(`
`),i("span",{class:"line"},[i("span",null,"     name: kubectl")]),s(`
`),i("span",{class:"line"},[i("span",null,"    - mountPath: /root/.kube")]),s(`
`),i("span",{class:"line"},[i("span",null,"     name: kubeconfig")]),s(`
`),i("span",{class:"line"},[i("span",null,"   volumes:")]),s(`
`),i("span",{class:"line"},[i("span",null,"   - name: jenkinshome")]),s(`
`),i("span",{class:"line"},[i("span",null,"    hostPath:")]),s(`
`),i("span",{class:"line"},[i("span",null,"     path: /home/jenkins_home")]),s(`
`),i("span",{class:"line"},[i("span",null,"   - name: docker")]),s(`
`),i("span",{class:"line"},[i("span",null,"    hostPath:")]),s(`
`),i("span",{class:"line"},[i("span",null,"     path: /usr/bin/docker")]),s(`
`),i("span",{class:"line"},[i("span",null,"   - name: dockersock")]),s(`
`),i("span",{class:"line"},[i("span",null,"    hostPath:")]),s(`
`),i("span",{class:"line"},[i("span",null,"     path: /var/run/docker.sock")]),s(`
`),i("span",{class:"line"},[i("span",null,"   - name: kubectl")]),s(`
`),i("span",{class:"line"},[i("span",null,"    hostPath:")]),s(`
`),i("span",{class:"line"},[i("span",null,"     path: /usr/bin/kubectl")]),s(`
`),i("span",{class:"line"},[i("span",null,"   - name: kubeconfig")]),s(`
`),i("span",{class:"line"},[i("span",null,"    hostPath:")]),s(`
`),i("span",{class:"line"},[i("span",null,"     path: /root/.kube")]),s(`
`),i("span",{class:"line"},[i("span",null,"---(这半角横杠一定要写，用于分割资源类型)")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161937650.png",alt:"image-20240930095715999",loading:"lazy",decoding:"async"})],-1),i("h3",{id:"生成-jenkins-服务资源文件",tabindex:"-1"},[s("生成 jenkins 服务资源文件 "),i("a",{class:"header-anchor",href:"#生成-jenkins-服务资源文件","aria-label":'Permalink to "生成 jenkins 服务资源文件"'},"​")],-1),i("p",null,[i("code",null,"kubectl create service nodeport jenkins --tcp=8080:8080 --node-port=30880 --namespace=devops --dry-run=client -o yaml >> jenkins.yaml")],-1),i("p",null,"—(这半角横杠一定要写，用于分割资源类型)",-1),i("h3",{id:"创建集群规则",tabindex:"-1"},[s("创建集群规则 "),i("a",{class:"header-anchor",href:"#创建集群规则","aria-label":'Permalink to "创建集群规则"'},"​")],-1),i("p",null,[i("code",null,"kubectl create clusterrole jenkins --verb=* --resource=* --namespace=devops --dry-run=client -o yaml >> jenkins.yaml")],-1),i("p",null,"—(这半角横杠一定要写，用于分割资源类型)",-1),i("h3",{id:"创建服务账户",tabindex:"-1"},[s("创建服务账户 "),i("a",{class:"header-anchor",href:"#创建服务账户","aria-label":'Permalink to "创建服务账户"'},"​")],-1),i("p",null,[i("code",null,"kubectl create serviceaccount jenkins --namespace=devops --dry-run=client -o yaml >> jenkins.yaml")],-1),i("p",null,"—(这半角横杠一定要写，用于分割资源类型)",-1),i("h3",{id:"创建集群账户规则绑定",tabindex:"-1"},[s("创建集群账户规则绑定 "),i("a",{class:"header-anchor",href:"#创建集群账户规则绑定","aria-label":'Permalink to "创建集群账户规则绑定"'},"​")],-1),i("p",null,[i("code",null,"kubectl create clusterrolebinding jenkins --clusterrole=jenkins --serviceaccount=devops:jenkins --namespace=devops --dry-run=client -o yaml >> jenkins.yaml")],-1),i("h3",{id:"创建-jenkins-资源",tabindex:"-1"},[s("创建 Jenkins 资源 "),i("a",{class:"header-anchor",href:"#创建-jenkins-资源","aria-label":'Permalink to "创建 Jenkins 资源"'},"​")],-1),i("p",null,[i("code",null,"kubectl apply -f jenkins.yaml")],-1),i("p",null,"查看资源是否正常启动",-1),i("p",null,[i("code",null,"kubectl -n devops get po -o wide")],-1),i("p",null,"输出：",-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NAME"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"            READY"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  STATUS"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  RESTARTS"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  AGE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  IP"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"       NODE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   NOMINATED"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," NODE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  READINESS"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GATES")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"jenkins-6c6bf5fc6f-4gsj8"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  1/1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   Running"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  0"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     34m"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  10.244.174.7"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  worker"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  <"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"non"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"      <"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"non"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"访问-jenkins",tabindex:"-1"},[s("访问 Jenkins "),i("a",{class:"header-anchor",href:"#访问-jenkins","aria-label":'Permalink to "访问 Jenkins"'},"​")],-1),i("p",null,[i("a",{href:"http://172.30.26.174:30880/",target:"_blank",rel:"noreferrer"},"http://172.30.26.174:30880/")],-1),i("p",null,"可以通过describe来查看当前Pod在哪个节点运行",-1),i("p",null,[i("code",null,"kubectl -n devops describe po jenkins-6c6bf5fc6f-9tmcc|grep Node")],-1),i("p",null,"显示：Node: worker/172.30.26.175",-1),i("p",null,"说明在Worker节点运行",-1),i("h3",{id:"查看管理员密钥",tabindex:"-1"},[s("查看管理员密钥 "),i("a",{class:"header-anchor",href:"#查看管理员密钥","aria-label":'Permalink to "查看管理员密钥"'},"​")],-1),i("p",null,"有两种方法，一种是进入Pod中查看：",-1),i("p",null,[i("code",null,"kubectl -n devops exec deploy/jenkins – cat /var/jenkins_home/secrets/initialAdminPassword")],-1),i("p",null,"还有一种更方便，直接查看Pod挂载出来的目录的内容（在Pod所在节点执行）",-1),i("p",null,[i("code",null,"cat /home/jenkins_home/secrets/initialAdminPassword")],-1),i("p",null,"输出并且填入：",-1),i("p",null,[i("code",null,"8cdc972300d94e52bb460fb4a567d1e1")],-1),i("h3",{id:"安装插件",tabindex:"-1"},[s("安装插件 "),i("a",{class:"header-anchor",href:"#安装插件","aria-label":'Permalink to "安装插件"'},"​")],-1),i("h4",{id:"如果-pod-可以访问外网",tabindex:"-1"},[s("如果 pod 可以访问外网 "),i("a",{class:"header-anchor",href:"#如果-pod-可以访问外网","aria-label":'Permalink to "如果 pod 可以访问外网"'},"​")],-1),i("p",null,"就选择安装社区推荐的插件，等待插件安装完成，然后设置管理员用户，账号 jenkins，密码 000000。在进入主页后，再自行下载这些插件：Blue Ocean、GitLab。",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161952732.png",alt:"image-20240930095753447",loading:"lazy",decoding:"async"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916161957551.png",alt:"image-20240930095802958",loading:"lazy",decoding:"async"})],-1),i("p",null,"前往 Download progress 页面可以查看下载进度",-1),i("p",null,"勾选底端",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162002996.png",alt:"image-20240930102401496",loading:"lazy",decoding:"async"})],-1),i("p",null,"然后等待安装完成自动重启",-1),i("h4",{id:"如果-pod-不能访问外网",tabindex:"-1"},[s("如果 pod 不能访问外网 "),i("a",{class:"header-anchor",href:"#如果-pod-不能访问外网","aria-label":'Permalink to "如果 pod 不能访问外网"'},"​")],-1),i("p",null,"提示 jenkins 似乎已经离线，且慢，请勿在网页进行操作",-1),i("p",null,"则按照以下步骤安装插件",-1),i("p",null,[s("下载插件包："),i("a",{href:"http://172.30.27.143/CICD/jenkinsPlugins.tar.gz",target:"_blank",rel:"noreferrer"},"http://172.30.27.143/CICD/jenkinsPlugins.tar.gz")],-1),i("p",null,[s("解压："),i("code",null,"tar zxvf jenkinsPlugins.tar.gz")],-1),i("p",null,[s("查看 jenkins pod："),i("code",null,"kubectl -n devops get po")],-1),i("p",null,"拷贝插件入 pod 中：",-1),i("p",null,[i("code",null,"kubectl -n devops cp plugins/ jenkins-d468c8f4c-r8k9r:/var/jenkins_home")],-1),i("p",null,"重启 jenkins pod：",-1),i("p",null,[i("code",null,"kubectl -n devops rollout restart deployment jenkins")],-1),i("h3",{id:"创建用户",tabindex:"-1"},[s("创建用户 "),i("a",{class:"header-anchor",href:"#创建用户","aria-label":'Permalink to "创建用户"'},"​")],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162104776.png",alt:"image-20240930095812105",loading:"lazy",decoding:"async"})],-1),i("h3",{id:"在安全设置中设置任何人可做任何事",tabindex:"-1"},[s("在安全设置中设置任何人可做任何事 "),i("a",{class:"header-anchor",href:"#在安全设置中设置任何人可做任何事","aria-label":'Permalink to "在安全设置中设置任何人可做任何事"'},"​")],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162109820.png",alt:"image-20240930100004081",loading:"lazy",decoding:"async"})],-1),i("p",null,"点击下方保存配置",-1),i("h2",{id:"安装-gitlab",tabindex:"-1"},[s("安装 GitLab "),i("a",{class:"header-anchor",href:"#安装-gitlab","aria-label":'Permalink to "安装 GitLab"'},"​")],-1),i("h3",{id:"加载镜像-worker-节点",tabindex:"-1"},[s("加载镜像(worker 节点) "),i("a",{class:"header-anchor",href:"#加载镜像-worker-节点","aria-label":'Permalink to "加载镜像(worker 节点)"'},"​")],-1),i("p",null,"已经在 jenkins 步骤完成",-1),i("h3",{id:"生成-gitlab基础资源文件",tabindex:"-1"},[s("生成 GitLab基础资源文件 "),i("a",{class:"header-anchor",href:"#生成-gitlab基础资源文件","aria-label":'Permalink to "生成 GitLab基础资源文件"'},"​")],-1),i("p",null,[i("code",null,"kubectl create deployment gitlab --image=docker.io/gitlab/gitlab-ce:latest --namespace=devops --port=80 --dry-run=client -o yaml >> gitlab.yaml")],-1),i("p",null,"添加或修改为以下部分：",-1),i("div",{class:"language-yaml"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"yaml"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"    imagePullPolicy"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"IfNotPresent")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"    name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"gitlab-ce")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"    env"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    - "),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"GITLAB_ROOT_PASSWORD")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"      value"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"CloudCICD@123")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    - "),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"GITLAB_PORT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"      value"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"80"')])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162121938.png",alt:"image-20240930100106527",loading:"lazy",decoding:"async"})],-1),i("p",null,"—(这半角横杠一定要写，用于分割资源类型)",-1),i("h3",{id:"生成-gitlab服务资源文件",tabindex:"-1"},[s("生成 GitLab服务资源文件 "),i("a",{class:"header-anchor",href:"#生成-gitlab服务资源文件","aria-label":'Permalink to "生成 GitLab服务资源文件"'},"​")],-1),i("p",null,[i("code",null,"kubectl create service nodeport gitlab --tcp=80:80 --node-port=30888 --namespace=devops --dry-run=client -o yaml >> gitlab.yaml")],-1),i("h3",{id:"创建-gitlab资源",tabindex:"-1"},[s("创建 GitLab资源 "),i("a",{class:"header-anchor",href:"#创建-gitlab资源","aria-label":'Permalink to "创建 GitLab资源"'},"​")],-1),i("p",null,[i("code",null,"kubectl apply -f gitlab.yaml")],-1),i("p",null,"GitLab 启动非常的慢，请至少等待十分钟，可以使用 kubectl 命令查看日志和详细信息",-1),i("p",null,[i("code",null,"kubectl -n devops logs [pod id] | tail")],-1),i("h3",{id:"访问-gitlab",tabindex:"-1"},[s("访问 GitLab "),i("a",{class:"header-anchor",href:"#访问-gitlab","aria-label":'Permalink to "访问 GitLab"'},"​")],-1),i("p",null,[i("a",{href:"http://172.30.26.174:30888/",target:"_blank",rel:"noreferrer"},"http://172.30.26.174:30888/")],-1),i("p",null,"输入账号密码登录",-1),i("p",null,"账号：root",-1),i("p",null,"密码：CloudCICD@123",-1),i("h3",{id:"配置jenkins连接gitlab",tabindex:"-1"},[s("配置Jenkins连接GitLab "),i("a",{class:"header-anchor",href:"#配置jenkins连接gitlab","aria-label":'Permalink to "配置Jenkins连接GitLab"'},"​")],-1),i("p",null,"（1）设置Outbound requests",-1),i("p",null,[s("登录Gitlab管理员界面（"),i("a",{href:"http://master:30888/admin%EF%BC%89%EF%BC%8C%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A",target:"_blank",rel:"noreferrer"},"http://master:30888/admin），如图所示：")],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162128657.png",alt:"image-20240930100115861",loading:"lazy",decoding:"async"})],-1),i("p",null,"在左侧导航栏选择“Settings→Network”，设置“Outbound requests”，勾选“Allow requests to the local network from web hooks and services”复选框，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162133456.png",alt:"image-20240930100124892",loading:"lazy",decoding:"async"})],-1),i("p",null,"配置完成 Save changes",-1),i("h3",{id:"创建gitlab-api-token",tabindex:"-1"},[s("创建GitLab API Token "),i("a",{class:"header-anchor",href:"#创建gitlab-api-token","aria-label":'Permalink to "创建GitLab API Token"'},"​")],-1),i("p",null,"单击GitLab用户头像图标，在左侧导航栏选择“Preferences”，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162139665.png",alt:"image-20240930100133759",loading:"lazy",decoding:"async"})],-1),i("p",null,"在左侧导航栏选择“Access Tokens”添加Token，如图所示：",-1),i("p",null,"注意，Expiration date 尽量往后选择几天",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162147823.png",alt:"image-20240930100145192",loading:"lazy",decoding:"async"})],-1),i("p",null,"单击“Create personal access token”按钮生成Token，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162204603.png",alt:"image-20240930100150892",loading:"lazy",decoding:"async"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162209305.png",alt:"image-20240930100156642",loading:"lazy",decoding:"async"})],-1),i("p",null,"记录下Token（glpat-earMgQ66g4SdoMNjJr6e），后面配置Jenkins时会用到。",-1),i("h3",{id:"配置jenkins-与-gitlab连接",tabindex:"-1"},[s("配置Jenkins 与 GitLab连接 "),i("a",{class:"header-anchor",href:"#配置jenkins-与-gitlab连接","aria-label":'Permalink to "配置Jenkins 与 GitLab连接"'},"​")],-1),i("p",null,"登录Jenkins首页，选择“系统管理→系统配置”，配置GitLab信息，取消勾选“Enable authentiviion for ‘/project’ end-point”，输入“Connection name”和“Gitlab host URL”，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162215083.png",alt:"image-20240930100203731",loading:"lazy",decoding:"async"})],-1),i("p",null,"添加Credentials，单击“添加”→“Jenkins”按钮添加认证信息，将Gitlab API Token填入，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162220486.png",alt:"image-20240930100212507",loading:"lazy",decoding:"async"})],-1),i("p",null,"选择新添加的证书，然后单击“Test Connection”按钮，如图所示：",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162235863.png",alt:"image-20240930100217835",loading:"lazy",decoding:"async"})],-1),i("p",null,"返回结果为Success，说明Jenkins可以正常连接GitLab，点击左下角保存。",-1),i("h2",{id:"创建-gitlab项目仓库",tabindex:"-1"},[s("创建 GitLab项目仓库 "),i("a",{class:"header-anchor",href:"#创建-gitlab项目仓库","aria-label":'Permalink to "创建 GitLab项目仓库"'},"​")],-1),i("p",null,"进入 gitlab，点击 Create a project",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162247033.png",alt:"image-20240930100227418",loading:"lazy",decoding:"async"})],-1),i("p",null,"选择添加空项目",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162253031.png",alt:"image-20240930100232816",loading:"lazy",decoding:"async"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162257501.png",alt:"image-20240930101122150",loading:"lazy",decoding:"async"})],-1),i("p",null,"点击Create Project创建项目",-1),i("h3",{id:"上传项目",tabindex:"-1"},[s("上传项目 "),i("a",{class:"header-anchor",href:"#上传项目","aria-label":'Permalink to "上传项目"'},"​")],-1),i("p",null,"下载项目文件：",-1),i("p",null,[i("code",null,"curl -O http://172.30.27.143/CICD/VitePressProject.tar.gz")],-1),i("p",null,"解法并且进入目录：",-1),i("p",null,[i("code",null,"tar zxf VitePressProject.tar.gz")],-1),i("p",null,[i("code",null,"cd VitePressProject")],-1),i("h3",{id:"安装git",tabindex:"-1"},[s("安装git "),i("a",{class:"header-anchor",href:"#安装git","aria-label":'Permalink to "安装git"'},"​")],-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yum"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," git"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --global"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," user.name"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Administrator"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --global"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," user.email"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "admin@example.com"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," init")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," commit"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -m"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Initial commit"'),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # IP地址请改为自己GitLab的IP和端口")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," remote"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," origin"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http://172.30.26.174:30888/root/vitepress.git")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"git"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," push"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --set-upstream"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," origin"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," master"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # 输入账号密码")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162305273.png",alt:"image-20240930101137940",loading:"lazy",decoding:"async"})],-1),i("p",null,"刷新GitLab网页可以看到项目已经上传成功了",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162313277.png",alt:"image-20240930101144723",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"新建流水线",tabindex:"-1"},[s("新建流水线 "),i("a",{class:"header-anchor",href:"#新建流水线","aria-label":'Permalink to "新建流水线"'},"​")],-1),i("h3",{id:"image-20240930101200139-image-20240930101219825配置构建触发器",tabindex:"-1"},[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162317858.png",alt:"image-20240930101200139"}),s(),i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162322186.png",alt:"image-20240930101219825"}),s("配置构建触发器 "),i("a",{class:"header-anchor",href:"#image-20240930101200139-image-20240930101219825配置构建触发器","aria-label":'Permalink to "![image-20240930101200139](https://minio-api.horonlee.com/obsidian/assets/博文/KubernetesJenkinCICD/IMG-20250916162317858.png) ![image-20240930101219825](https://minio-api.horonlee.com/obsidian/assets/博文/KubernetesJenkinCICD/IMG-20250916162322186.png)配置构建触发器"'},"​")],-1),i("p",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916165338127.png",alt:"image-20240930101302787"}),s("记录下GitLab webhook URL的地址（"),i("a",{href:"http://172.30.26.174:30880/project/vitepress",target:"_blank",rel:"noreferrer"},"http://172.30.26.174:30880/project/vitepress"),s(")，后期配置webhook需要使用。")],-1),i("h3",{id:"配置流水线",tabindex:"-1"},[s("配置流水线 "),i("a",{class:"header-anchor",href:"#配置流水线","aria-label":'Permalink to "配置流水线"'},"​")],-1),i("p",null,"在定义域中选择“Pipeline script from SCM”，此选项指示Jenkins从源代码管理（SCM）仓库获取流水线。在SCM域中选择“Git”，然后输入“Repository URL”",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162329829.png",alt:"image-20240930101313851",loading:"lazy",decoding:"async"})],-1),i("p",null,"![image-20240930101324283](/Users/horonlee/Library/Application Support/typora-user-images/image-20240930101324283.png)",-1),i("p",null,"新建凭据",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162532043.png",alt:"image-20240930101348495",loading:"lazy",decoding:"async"})],-1),i("p",null,"最后点击下方保存，自动回到流水线控制台",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162536493.png",alt:"image-20240930101354353",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"编写流水线",tabindex:"-1"},[s("编写流水线 "),i("a",{class:"header-anchor",href:"#编写流水线","aria-label":'Permalink to "编写流水线"'},"​")],-1),i("p",null,"Pipeline有两种创建方法——可以直接在Jenkins的Web UI界面中输入脚本；也可以通过创建一个Jenkinsfile脚本文件放入项目源码库中。",-1),i("p",null,"一般推荐在Jenkins中直接从源代码控制（SCMD）中直接载入Jenkinsfile Pipeline这种方法。",-1),i("p",null,"登录GitLab进入vitepress项目，选择新建文件",-1),i("p",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162541869.png",alt:"image-20240930101406512"}),s("将流水线脚本输入到Jenkinsfile中，更改kubernetes.yaml文件中所使用的镜像的名字，将其harbor.io改为自己harbor仓库的地址，本文是"),i("code",null,"172.30.26.174")],-1),i("div",{class:"language-json"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"pipeline{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"  agent"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," none")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"  environment"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    DOCKER_REGISTRY_IP"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ="),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," '172.30.26.174'"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  //这个IP请改为Harbor仓库的IP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    IMAGE_NAME"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ="),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 'vitepress/vitepress'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    IMAGE_TAG"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ="),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 'dev'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    DOCKER_USERNAME"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ="),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 'admin'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    DOCKER_PASSWORD"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," ="),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," 'Harbor12345'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  stages {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"    stage('image-build')"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"      agent"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," any")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"      steps"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"        script"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "docker build -t ${DOCKER_REGISTRY_IP}/${IMAGE_NAME}:${IMAGE_TAG} ."')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "echo ${DOCKER_PASSWORD} | docker login ${DOCKER_REGISTRY_IP} -u ${DOCKER_USERNAME} --password-stdin"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "docker push ${DOCKER_REGISTRY_IP}/${IMAGE_NAME}:${IMAGE_TAG}"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    stage('project-deploy') {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"      agent"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," any")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"      steps"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"        script"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "kubectl apply -f kubernetes.yaml"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "kubectl -n devops get po -o wide"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"          sh"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},' "kubectl -n devops get svc -o wide"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"提交更改即可",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162548160.png",alt:"image-20240930101420695",loading:"lazy",decoding:"async"})],-1),i("h2",{id:"配置webhook",tabindex:"-1"},[s("配置WebHook "),i("a",{class:"header-anchor",href:"#配置webhook","aria-label":'Permalink to "配置WebHook"'},"​")],-1),i("p",null,"在GitLab的项目中，通常会使用Webhook的各种事件来触发对应的构建，通常配置好后会向设定好的URL发送post请求。",-1),i("p",null,"登录GitLab，进入viteress项目，现在左侧导航栏“Settings→Webhooks”，将前面记录的GitLab webhook URL地址填入URL处，禁用SSL认证",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162552748.png",alt:"image-20240930101425998",loading:"lazy",decoding:"async"})],-1),i("p",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162556982.png",alt:"image-20240930101431483"}),s(),i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162604832.png",alt:"image-20240930101442677"}),s(),i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162611251.png",alt:"image-20240930101456619"})],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162617113.png",alt:"image-20240930101503195",loading:"lazy",decoding:"async"})],-1),i("p",null,"结果返回HTTP 200则表明Webhook配置成功",-1),i("h2",{id:"运行流水线",tabindex:"-1"},[s("运行流水线 "),i("a",{class:"header-anchor",href:"#运行流水线","aria-label":'Permalink to "运行流水线"'},"​")],-1),i("p",null,"登录Jenkins 刷新页面，因为刚才测试了一个提交动作被 webhook 捕捉，所以可以看到vitepress项目已经开始构建",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162621255.png",alt:"image-20240930101512669",loading:"lazy",decoding:"async"})],-1),i("p",null,"在流水线的 ConsoleOutput 中可以查看日志",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162628606.png",alt:"image-20240930101529611",loading:"lazy",decoding:"async"})],-1),i("p",null,"也可以进入Blue Ocean查看构建日志和成果",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162633237.png",alt:"image-20240930101537100",loading:"lazy",decoding:"async"})],-1),i("p",null,"等待一段时间即可构建完成",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162638322.png",alt:"image-20240930101542664",loading:"lazy",decoding:"async"})],-1),i("p",null,"如果构建失败，需要前往 Harbor 仓库删除上传的镜像以及 worker 节点上 ctr -n k8s.io image ls|grep vitepress 显示的所有镜像，再次运行流水线",-1),i("h2",{id:"检查cicd情况",tabindex:"-1"},[s("检查CICD情况 "),i("a",{class:"header-anchor",href:"#检查cicd情况","aria-label":'Permalink to "检查CICD情况"'},"​")],-1),i("p",null,"进入Harbor，可以看到Jenkins的流水线推送上去的镜像",-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162643441.png",alt:"image-20240930101548089",loading:"lazy",decoding:"async"})],-1),i("p",null,"查看是否有测试pod在运行",-1),i("div",{class:"language-bash"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"kubectl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," get"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pod")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NAME"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"             READY"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  STATUS"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  RESTARTS"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  AGE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vitepress-65c4df475c-8sfwf"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  1/1"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   Running"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  0"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     8m42s")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"kubectl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," get"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," svc"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -o"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," wide")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NAME"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     TYPE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"    CLUSTER-IP"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   EXTERNAL-IP"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  PORT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"S"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")     "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"AGE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   SELECTOR")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"kubernetes"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  ClusterIP"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  10.96.0.1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   <"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"non"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"    443/TCP"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"     4d6h"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  <"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"non"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vitepress"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  NodePort"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  10.111.47.80"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  <"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"non"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"    5173:30173/TCP"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  9m19s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  app=vitepres")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"接下来去查看pod展示的网页",-1),i("p",null,[i("a",{href:"http://172.30.26.174:30173/",target:"_blank",rel:"noreferrer"},"http://172.30.26.174:30173/")],-1),i("figure",null,[i("img",{src:"https://minio-api.horonlee.com/obsidian/assets/%E5%8D%9A%E6%96%87/KubernetesJenkinCICD/IMG-20250916162648528.png",alt:"image-20240930101558588",loading:"lazy",decoding:"async"})],-1),i("p",null,"可以访问网页说明应用自动测试部署成功，CICD流程到此结束！",-1),i("h1",{id:"补充",tabindex:"-1"},[s("补充 "),i("a",{class:"header-anchor",href:"#补充","aria-label":'Permalink to "补充"'},"​")],-1),i("p",null,"暂无…",-1)])]),"main-header":a(()=>[n(l.$slots,"main-header")]),"main-header-after":a(()=>[n(l.$slots,"main-header-after")]),"main-nav":a(()=>[n(l.$slots,"main-nav")]),"main-content-before":a(()=>[n(l.$slots,"main-content-before")]),"main-content":a(()=>[n(l.$slots,"main-content")]),"main-content-after":a(()=>[n(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[n(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[n(l.$slots,"main-nav-after")]),comment:a(()=>[n(l.$slots,"comment")]),footer:a(()=>[n(l.$slots,"footer")]),aside:a(()=>[n(l.$slots,"aside")]),"aside-custom":a(()=>[n(l.$slots,"aside-custom")]),default:a(()=>[n(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{R as default,C as usePageData};
