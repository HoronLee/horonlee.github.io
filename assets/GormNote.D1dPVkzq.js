import{_ as g}from"./ValaxyMain.vue_vue_type_style_index_0_lang.BKY0BFev.js";import"./chunks/@vueuse/motion.C1YF0VrX.js";import{d as o,u as y,a as c}from"./chunks/vue-router.B0lpXBWQ.js";import{X as u,b3 as F,b_ as l,be as t,_ as i,a5 as s,bB as m,b5 as b}from"./framework.tSB2Odh-.js";import"./app.CfWrNu88.js";import"./chunks/dayjs.BmWuu2Zz.js";import"./chunks/vue-i18n.CP2UHYEb.js";import"./chunks/pinia.BF0-M7Fk.js";import"./chunks/nprogress.YXB5kar1.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.DoC94HOc.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.CBF25nPr.js";import"./post.TKccRjPH.js";const A=o("/posts/GormNote",async h=>JSON.parse('{"title":"Gorm笔记","description":"","frontmatter":{"layout":"post","title":"Gorm笔记","date":"2024-04-25 16:19:23","tags":["Go"],"categories":["编程笔记"],"cover":"https://files.codingninjas.in/article_images/gin-getting-started-with-gorm-golang-s-orm-library-1-1672754782.webp","password":null,"hide":null},"headers":[],"relativePath":"pages/posts/GormNote.md","lastUpdated":1767692976000}'),{lazy:(h,k)=>h.name===k.name}),q={__name:"GormNote",setup(h,{expose:k}){const{data:n}=A(),d=y(),p=c(),e=Object.assign(p.meta.frontmatter||{},n.value?.frontmatter||{});return d.currentRoute.value.data=n.value,b("valaxy:frontmatter",e),globalThis.$frontmatter=e,k({frontmatter:{layout:"post",title:"Gorm笔记",date:"2024-04-25 16:19:23",tags:["Go"],categories:["编程笔记"],cover:"https://files.codingninjas.in/article_images/gin-getting-started-with-gorm-golang-s-orm-library-1-1672754782.webp",password:null,hide:null}}),(a,r)=>{const E=g;return F(),u(E,{frontmatter:m(e)},{"main-content-md":l(()=>[...r[0]||(r[0]=[i("p",null,'xxxxxxxxxx package main​import "fmt"​func findprimes(number int) bool {    // 质数本身就能被1和本身整除，所以可以直接筛选2~n-1的数字 for i := 2; i < number; i++ { if number%i == 0 { return false } }    // 筛选出来的也就只要判断是不是大于1就可以，如果是1就False如果不是就True if number > 1 { return true } else { return false }}​func main() { fmt.Println("Prime numbers less than 20:")​ for number := 1; number <= 20; number++ { if findprimes(number) { fmt.Printf("%v ", number) } }}go',-1),i("blockquote",null,[i("p",null,"暂且当做用于连接并且快速操作数据库的库")],-1),i("h2",{id:"如何开始",tabindex:"-1"},[s("如何开始 "),i("a",{class:"header-anchor",href:"#如何开始","aria-label":'Permalink to "如何开始"'},"​")],-1),i("p",null,"导入所需的库",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gorm.io/gorm"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gorm.io/driver/mysql"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"'),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	//由于需要连接到mysql，所以使用mysql驱动器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"与数据库建立连接",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// dsn是与数据库的连接信息，是必需的，其中vdc指的是连接到的数据库(需要已经存在)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"dsn "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "root:PaSsWoRd@tcp(127.0.0.1:3306)/test?charset=utf8mb4&parseTime=True&loc=Local"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 使用mysql的方法来连接到数据库")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db , err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gorm."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Open"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(mysql."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Open"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(dsn), "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gorm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		panic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(err)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h1",{id:"如何开始-1",tabindex:"-1"},[s("如何开始？ "),i("a",{class:"header-anchor",href:"#如何开始-1","aria-label":'Permalink to "如何开始？"'},"​")],-1),i("p",null,"GORM 通过将 Go 结构体（Go structs） 映射到数据库表来简化数据库交互。 了解如何在GORM中定义模型，是充分利用GORM全部功能的基础。",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," User"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID           "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"           // Standard field for the primary key")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Name         "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         // 一个常规字符串字段")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Email        "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 一个指向字符串的指针, allowing for null values")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Age          "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint8"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"          // 一个未签名的8位整数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Birthday     "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     // A pointer to time.Time, can be null")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  MemberNumber "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sql"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NullString"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // Uses sql.NullString to handle nullable strings")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ActivatedAt  "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sql"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NullTime"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"   // Uses sql.NullTime for nullable time fields")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  CreatedAt    "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      // 创建时间（由GORM自动管理）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UpdatedAt    "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      // 最后一次更新时间（由GORM自动管理）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("blockquote",null,[i("p",null,"最好遵守以下规范")],-1),i("ol",null,[i("li",null,[i("strong",null,"主键"),s("：GORM 使用一个名为"),i("code",null,"ID"),s(" 的字段作为每个模型的默认主键。")]),i("li",null,[i("strong",null,"表名"),s("：默认情况下，GORM 将结构体名称转换为 "),i("code",null,"snake_case"),s(" 并为表名加上复数形式。 例如，一个 "),i("code",null,"User"),s(" 结构体在数据库中的表名变为 "),i("code",null,"users"),s(" 。")]),i("li",null,[i("strong",null,"列名"),s("：GORM 自动将结构体字段名称转换为 "),i("code",null,"snake_case"),s(" 作为数据库中的列名。")]),i("li",null,[i("strong",null,"时间戳字段"),s("：GORM使用字段 "),i("code",null,"CreatedAt"),s(" 和 "),i("code",null,"UpdatedAt"),s(" 来自动跟踪记录的创建和更新时间。")])],-1),i("h2",{id:"浅尝建表",tabindex:"-1"},[s("浅尝建表 "),i("a",{class:"header-anchor",href:"#浅尝建表","aria-label":'Permalink to "浅尝建表"'},"​")],-1),i("p",null,"首先定义一个结构体作为一张表的字段来源",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Product"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"	gorm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Model"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	// 这个的含义请看gorm.Model一节")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Code  "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Price "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("我们已经有了表的对象，接下来同步一下数据表"),i("code",null,"db.AutoMigrate(&Product{})"),s("，这个操作会将"),i("code",null,"Product"),s("的所有成员变量都设定为mysql当前数据表中的字段，并且表名会变为结构体的小写并且成为复数，也就是"),i("code",null,"products"),s("，但是目前里面是没有任何记录值的。")],-1),i("h2",{id:"添加记录",tabindex:"-1"},[s("添加记录 "),i("a",{class:"header-anchor",href:"#添加记录","aria-label":'Permalink to "添加记录"'},"​")],-1),i("p",null,"你可以以如下代码来添加一条记录，值得注意的是，你传入的必需是一个结构体的指针！",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Create"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Product"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{Code: "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"D42"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Price: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("当然你也可以在外部先实例化一个结构体对象"),i("code",null,'myProdect := Product{Code: "D42", Price: 100}'),s("，然后再这里使用"),i("code",null,"&myProdect"),s("来添加记录。")],-1),i("h2",{id:"删除记录",tabindex:"-1"},[s("删除记录 "),i("a",{class:"header-anchor",href:"#删除记录","aria-label":'Permalink to "删除记录"'},"​")],-1),i("p",null,"首先需要实例化一个结构体对象用来承担你所要删除记录的数据，有点类似传统数据库操作里的游标。",-1),i("p",null,[i("code",null,"var Product"),s("⚠️此对象的结构体必须是你要操作的表所对应的")],-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Delete"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"product, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"这里的1指的就是主键序号，参考gorm.Model这一节即可明白其含义",-1),i("p",null,"这段代码就是删除了gorm规定的序号为1的记录",-1),i("h2",{id:"更改记录",tabindex:"-1"},[s("更改记录 "),i("a",{class:"header-anchor",href:"#更改记录","aria-label":'Permalink to "更改记录"'},"​")],-1),i("p",null,[s("同样基于上面的结构体对象。使用"),i("code",null,"db.Model(&product).Updates()"),s("来更新")],-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Model"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"product)."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Updates"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Product"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{Price: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"200"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Code: "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"F42"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}) "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 仅更新非零值字段")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Model"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"product)."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Updates"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"map"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"interface"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Price"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"200"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Code"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"F42"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h2",{id:"查询记录",tabindex:"-1"},[s("查询记录 "),i("a",{class:"header-anchor",href:"#查询记录","aria-label":'Permalink to "查询记录"'},"​")],-1),i("p",null,"以下是两种简单的查找方式",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"First"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"product, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 根据整型主键查找")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"db."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"First"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"product, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"code = ?"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"D42"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 查找 code 字段值为 D42 的记录")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"查找的结果自然是存在了变量product 中，这里也需要强调，因为Go语言主打值拷贝传递，所以这里仍旧需要传递变量的指针！",-1),i("hr",null,null,-1),i("h2",{id:"gorm-model",tabindex:"-1"},[s("gorm.Model "),i("a",{class:"header-anchor",href:"#gorm-model","aria-label":'Permalink to "gorm.Model"'},"​")],-1),i("p",null,[s("GORM提供了一个预定义的结构体，名为"),i("code",null,"gorm.Model"),s("，其中包含常用字段：")],-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// gorm.Model 的定义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Model"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID        "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'           `gorm:"primaryKey"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  CreatedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UpdatedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  DeletedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gorm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"DeletedAt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' `gorm:"index"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("ul",null,[i("li",null,[i("strong",null,"将其嵌入在您的结构体中"),s(": 您可以直接在您的结构体中嵌入 "),i("code",null,"gorm.Model"),s(" ，以便自动包含这些字段。 这对于在不同模型之间保持一致性并利用GORM内置的约定非常有用，请参考"),i("a",{href:"https://gorm.io/zh_CN/docs/models.html#embedded_struct",target:"_blank",rel:"noreferrer"},"嵌入结构"),s("。")]),i("li",null,[i("strong",null,"包含的字段"),s("： "),i("ul",null,[i("li",null,[i("code",null,"ID"),s(" ：每个记录的唯一标识符（主键）。")]),i("li",null,[i("code",null,"CreatedAt"),s(" ：在创建记录时自动设置为当前时间。")]),i("li",null,[i("code",null,"UpdatedAt"),s("：每当记录更新时，自动更新为当前时间。")]),i("li",null,[i("code",null,"DeletedAt"),s("：用于软删除（将记录标记为已删除，而实际上并未从数据库中删除）。")])])])],-1),i("h2",{id:"嵌入结构体",tabindex:"-1"},[s("嵌入结构体 "),i("a",{class:"header-anchor",href:"#嵌入结构体","aria-label":'Permalink to "嵌入结构体"'},"​")],-1),i("p",null,"对于匿名字段，GORM 会将其字段包含在父结构体中，例如：",-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," User"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  gorm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Model")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Name "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 等效于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," User"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID        "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'           `gorm:"primaryKey"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  CreatedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UpdatedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Time")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  DeletedAt "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gorm"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"DeletedAt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' `gorm:"index"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Name "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("对于正常的结构体字段，你也可以通过标签 "),i("code",null,"embedded"),s(" 将其嵌入，例如：")],-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Author"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Name  "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Email "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Blog"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID      "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Author  "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Author"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' `gorm:"embedded"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Upvotes "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int32")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 等效于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Blog"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID    "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int64")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Name  "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Email "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Upvotes  "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int32")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("并且，您可以使用标签 "),i("code",null,"embeddedPrefix"),s(" 来为 db 中的字段名添加前缀，例如：")],-1),i("div",{class:"language-go"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Blog"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID      "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Author  "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Author"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' `gorm:"embedded;embeddedPrefix:author_"`')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Upvotes "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int32")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 等效于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Blog"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ID          "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int64")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  AuthorName "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  AuthorEmail "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Upvotes     "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int32")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)])]),"main-header":l(()=>[t(a.$slots,"main-header")]),"main-header-after":l(()=>[t(a.$slots,"main-header-after")]),"main-nav":l(()=>[t(a.$slots,"main-nav")]),"main-content-before":l(()=>[t(a.$slots,"main-content-before")]),"main-content":l(()=>[t(a.$slots,"main-content")]),"main-content-after":l(()=>[t(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[t(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[t(a.$slots,"main-nav-after")]),comment:l(()=>[t(a.$slots,"comment")]),footer:l(()=>[t(a.$slots,"footer")]),aside:l(()=>[t(a.$slots,"aside")]),"aside-custom":l(()=>[t(a.$slots,"aside-custom")]),default:l(()=>[t(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{q as default,A as usePageData};
