import{i as x,j as U,g as W,u as N,k as O,b as T,d as H,c as M,l as G,h as J,e as Q,f as X}from"./app.DYfWnlAw.js";import{_ as Z}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.T0jDEb0a.js";import"./chunks/@vueuse/motion.Bjv2JULu.js";import{u as w,a as ee}from"./chunks/vue-router.CkK6wkE3.js";import{I as b,A as _,a9 as z,aa as C,ac as u,F as l,ab as o,L as d,ah as R,al as p,ae as m,af as $,H as L,D as te,W as n,ap as B,am as K,as as ae}from"./framework.DiIp3j3P.js";import{u as oe,a as ne}from"./animation.CNQFLJmo.js";import{u as S}from"./chunks/vue-i18n.Cqw7qwJJ.js";import{_ as re}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.NFwy7W3t.js";import"./chunks/dayjs.Byk5cVHE.js";import"./chunks/pinia.DAg2g0nX.js";import"./chunks/nprogress.QNtX8Req.js";/* empty css                    */import"./index.BRXJGymZ.js";const se={class:"st-text"},le=b({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(v){const{$tO:c}=x(),y=w(),e=_(()=>{const t=y.query.category||"";return Array.isArray(t)?[t]:t.split("/")});return(t,a)=>{const i=V,g=z("RouterLink");return l(U)(t.categoryItem)?(o(),C(i,{key:0,"parent-key":t.parentKey?`${t.parentKey}/${t.categoryItem.name}`:t.categoryItem.name,category:t.categoryItem,collapsable:!e.value.includes(t.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(o(),u(d,{key:1},[t.categoryItem.title?(o(),C(g,{key:0,to:t.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:p(()=>[a[0]||(a[0]=m("div",{"i-ri-file-text-line":""},null,-1)),m("span",se,$(l(c)(t.categoryItem.title)),1)]),_:1},8,["to"])):R("v-if",!0)],64))}}}),ie={key:0,"i-ri-folder-add-line":""},ce={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},ue={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},pe={key:0},V=b({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(v){const c=v,y=ee(),e=L(c.collapsable),{t}=S(),{$t:a}=x(),i=L(),{show:g}=oe(i);function I(r){e.value=!1,y.push({query:{category:r}}),g()}te(()=>{const r=document.querySelector(".post-collapse-container");r&&(i.value=r)});const h=L();return c.level===1&&ne(h,{i:c.i||0,y:20,duration:200}),(r,s)=>{const Y=le;return o(),u(d,null,[m("li",{ref_key:"categoryRef",ref:h,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[m("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:s[0]||(s[0]=f=>e.value=!e.value)},[e.value?(o(),u("div",ie)):(o(),u("div",ce))]),m("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:s[1]||(s[1]=f=>I(r.parentKey))},[m("span",null,$(r.category.name==="Uncategorized"?l(t)("category.uncategorized"):l(a)(r.category.name)),1),m("span",ue,$(r.category.total),1)])],512),n(B,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:p(()=>[e.value?R("v-if",!0):(o(),u("ul",pe,[(o(!0),u(d,null,K(r.category.children.values(),(f,k)=>(o(),u("li",{key:k,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[n(Y,{i:k,"category-item":f,"parent-key":r.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),me={flex:"~ col"},ye=b({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(v){const c=w(),y=_(()=>{const e=c.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(e,t)=>{const a=V;return o(),u("div",me,[(o(!0),u(d,null,K(e.categories.values(),(i,g)=>(o(),u("ul",{key:i.name,class:"category-list"},[n(a,{i:g,"parent-key":i.name,category:i,level:e.level+1,collapsable:!y.value.includes(i.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),ge={text:"center",class:"yun-text-light",p:"2"},we=b({__name:"categories",setup(v){const{t:c}=S(),y=W(),e=N(),t=w(),a=_(()=>t.query.category||""),i=O(),g=_(()=>(e.value.icon||(e.value.icon="i-ri-folder-2-line"),e.value.icon)),I=_(()=>y.postList.filter(s=>s.categories&&a.value!=="Uncategorized"?typeof s.categories=="string"?s.categories===a.value:s.categories.join("/").startsWith(a.value)&&s.categories[0]===a.value.split("/")[0]:!s.categories&&a.value==="Uncategorized"?s.categories===void 0:!1)),{$tO:h}=x();return T([H({"@type":"CollectionPage"})]),(r,s)=>{const Y=M,f=re,k=ye,A=z("RouterView"),q=Z,j=G,D=J,E=Q,F=X;return o(),u(d,null,[n(E,null,{default:p(()=>[n(Y),n(A,null,{default:p(({Component:P})=>[(o(),C(ae(P),null,{"main-header":p(()=>[n(f,{title:l(h)(l(e).title)||l(c)("menu.categories"),icon:g.value,color:l(e).color,"page-title-class":l(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":p(()=>[n(B,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:p(()=>[m("div",ge,$(l(c)("counter.categories",Array.from(l(i).children).length)),1)]),_:1}),n(k,{categories:l(i).children},null,8,["categories"]),n(A)]),"main-nav-before":p(()=>[a.value?(o(),C(j,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:p(()=>[n(f,{m:"t-10",title:a.value==="Uncategorized"?l(c)("category.uncategorized"):a.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),n(q,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:I.value},null,8,["posts"])]),_:1})):R("v-if",!0)]),_:2},1024))]),_:1}),n(D)]),_:1}),n(F)],64)}}});export{we as default};
